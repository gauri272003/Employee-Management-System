<%- include('layout/header') %>

    <div class="container-fluid">
        <!-- Statistics Cards -->
        <div class="row g-4 mb-4">
            <!-- Total Employees Card -->
            <div class="col-xl-3 col-md-6">
                <div class="card stat-card stat-card-primary">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="card-subtitle mb-2 text-muted">Total Employees</h6>
                                <h2 class="card-title mb-0 text-charcoal">
                                    <%= stats.total %>
                                </h2>
                            </div>
                            <div class="stat-icon">
                                <i class="bi bi-people-fill"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Active Employees Card -->
            <div class="col-xl-3 col-md-6">
                <div class="card stat-card stat-card-success">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="card-subtitle mb-2 text-muted">Active</h6>
                                <h2 class="card-title mb-0 text-charcoal">
                                    <%= stats.active %>
                                </h2>

                            </div>
                            <div class="stat-icon">
                                <i class="bi bi-person-check-fill"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inactive Employees Card -->
            <div class="col-xl-3 col-md-6">
                <div class="card stat-card stat-card-warning">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="card-subtitle mb-2 text-muted">Inactive</h6>
                                <h2 class="card-title mb-0 text-charcoal">
                                    <%= stats.inactive %>
                                </h2>
                            </div>
                            <div class="stat-icon">
                                <i class="bi bi-person-x-fill"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Departments Card -->
            <div class="col-xl-3 col-md-6">
                <div class="card stat-card stat-card-info">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="card-subtitle mb-2 text-muted">Departments</h6>
                                <h2 class="card-title mb-0 text-charcoal">
                                    <%= stats.departments %>
                                </h2>
                            </div>
                            <div class="stat-icon">
                                <i class="bi bi-diagram-3-fill"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row g-4">
            <!-- Department Statistics -->
            <div class="col-lg-6">
                <div class="card shadow-sm">
                    <div class="card-header bg-white">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-bar-chart-fill me-2 text-primary"></i>
                            Department-wise Distribution
                        </h5>
                    </div>
                    <div class="card-body">
                        <% if (departmentStats.length> 0) { %>
                            <% departmentStats.forEach(dept=> { %>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-1">
                                        <span class="fw-medium">
                                            <%= dept.name %>
                                        </span>
                                        <span class="badge bg-primary">
                                            <%= dept.count %>
                                        </span>
                                    </div>
                                    <div class="progress" style="height: 8px;">
                                        <div class="progress-bar bg-warning" role="progressbar"
                                            style="width: <%=(dept.count / stats.total * 100).toFixed(0) %>%"
                                            aria-valuenow="<%= dept.count %>" aria-valuemin="0"
                                            aria-valuemax="<%= stats.total %>">
                                        </div>
                                    </div>
                                </div>
                                <% }); %>
                                    <% } else { %>
                                        <p class="text-center text-muted my-4">No department data available</p>
                                        <% } %>
                    </div>
                </div>
            </div>

            <!-- Recent Employees -->
            <div class="col-lg-6">
                <div class="card shadow-sm">
                    <div class="card-header bg-white d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-clock-history me-2 text-primary"></i>
                            Recent Employees
                        </h5>
                        <a href="/employees" class="btn btn-sm btn-outline-warning text-dark">View All</a>

                    </div>
                    <div class="card-body p-0">
                        <% if (recentEmployees.length> 0) { %>
                            <div class="list-group list-group-flush">
                                <% recentEmployees.forEach(emp=> { %>
                                    <a href="/employees/<%= emp._id %>" class="list-group-item list-group-item-action">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="mb-1">
                                                    <%= emp.name %>
                                                </h6>
                                                <p class="mb-0 text-muted small">
                                                    <i class="bi bi-briefcase-fill me-1"></i>
                                                    <%= emp.designation %>
                                                        <span class="mx-2">â€¢</span>
                                                        <i class="bi bi-building me-1"></i>
                                                        <%= emp.department %>
                                                </p>
                                            </div>
                                            <span
                                                class="badge bg-<%= emp.status === 'Active' ? 'success' : 'secondary' %>">
                                                <%= emp.status %>
                                            </span>
                                        </div>
                                    </a>
                                    <% }); %>
                            </div>
                            <% } else { %>
                                <p class="text-center text-muted my-4">No recent employees</p>
                                <% } %>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title mb-3">Quick Actions</h5>
                        <div class="d-flex justify-content-center gap-3 flex-wrap">
                            <a href="/employees/add" class="btn btn-warning text-dark">
                                <i class="bi bi-person-plus-fill me-2"></i>Add New Employee
                            </a>

                            <a href="/employees" class="btn btn-outline-warning text-dark">
                                <i class="bi bi-list-ul me-2"></i>View All Employees
                            </a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <%- include('layout/footer') %>